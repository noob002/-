<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>ê·¸ëƒ¥ ì •ë§ ì“¸ëª¨ì—†ëŠ” ì </title>
  <style>
    body {
      margin: 0;
      height: 100vh;
      background: white;
      cursor: none;
      overflow: hidden;
    }

    .dot {
      position: fixed;
      background: black;
      border-radius: 50%;
      pointer-events: none;
      transform: translate(-50%, -50%);
    }

    #text {
      position: fixed;
      bottom: 12px;
      right: 16px;
      font-size: 12px;
      color: #aaa;
      user-select: none;
    }
  </style>
</head>
<body>
  <div id="text">ì ì´ ëŠ˜ì–´ë‚©ë‹ˆë‹¤. ì´ìœ ëŠ” ì—†ìŠµë‹ˆë‹¤.</div>

  <script>
    /* ğŸ”’ ìš°í´ë¦­ / ê°œë°œìë„êµ¬ ì°¨ë‹¨ */
    document.addEventListener("contextmenu", e => e.preventDefault());
    document.addEventListener("keydown", e => {
      if (
        e.key === "F12" ||
        (e.ctrlKey && e.shiftKey && ["I", "J", "C"].includes(e.key)) ||
        (e.ctrlKey && e.key === "U")
      ) e.preventDefault();
    });

    const dots = [];
    const text = document.getElementById("text");

    let mouseX = innerWidth / 2;
    let mouseY = innerHeight / 2;

    let exploded50 = false;
    let exploded100 = false;

    const gravity = 0.6;
    const floor = innerHeight - 10;

    let spawnDelay = 3000;
    const minDelay = 200;
    const acceleration = 0.93;

    document.addEventListener("mousemove", e => {
      mouseX = e.clientX;
      mouseY = e.clientY;
    });

    function createDot() {
      const el = document.createElement("div");
      el.className = "dot";

      const size = Math.random() * 6 + 6;
      el.style.width = size + "px";
      el.style.height = size + "px";

      document.body.appendChild(el);

      dots.push({
        el,
        x: mouseX,
        y: mouseY,
        vx: (Math.random() - 0.5) * 10,
        vy: Math.random() * -10,
        speed: Math.random() * 0.08 + 0.02,
        size,
        mode: exploded50 ? "fall" : "follow"
      });
    }

    function explode50() {
      exploded50 = true;
      text.innerText = "ì ì´ í•œ ë²ˆ í„°ì¡ŒìŠµë‹ˆë‹¤.";

      dots.forEach(d => {
        d.mode = "fall";
        d.vx = (Math.random() - 0.5) * 12;
        d.vy = Math.random() * -15;
      });
    }

    function explode100() {
      exploded100 = true;
      text.innerText = "ì ì´ ë°”ë‹¥ì—ì„œ ë‹¤ì‹œ í„°ì¡ŒìŠµë‹ˆë‹¤.";

      dots.forEach(d => {
        d.mode = "fall";
        d.y = floor;
        d.vx = (Math.random() - 0.5) * 30;
        d.vy = Math.random() * -30 - 15; // ìœ„ë¡œ ê°•í•˜ê²Œ
      });
    }

    function spawnLoop() {
      createDot();

      if (dots.length >= 50 && !exploded50) explode50();
      if (dots.length >= 100 && !exploded100) explode100();

      if (exploded100 && spawnDelay > minDelay) {
        spawnDelay *= acceleration;
      }

      setTimeout(spawnLoop, spawnDelay);
    }

    /* ğŸ”¥ ì  ì¶©ëŒ (ëŒ€ì¶© ë¬¼ë¦¬) */
    function handleCollisions() {
      for (let i = 0; i < dots.length; i++) {
        for (let j = i + 1; j < dots.length; j++) {
          const a = dots[i];
          const b = dots[j];
          if (a.mode !== "fall" || b.mode !== "fall") continue;

          const dx = b.x - a.x;
          const dy = b.y - a.y;
          const dist = Math.hypot(dx, dy);
          const minDist = (a.size + b.size) / 2;

          if (dist < minDist) {
            const angle = Math.atan2(dy, dx);
            const overlap = (minDist - dist) / 2;

            const ox = Math.cos(angle) * overlap;
            const oy = Math.sin(angle) * overlap;

            a.x -= ox; a.y -= oy;
            b.x += ox; b.y += oy;

            [a.vx, b.vx] = [b.vx * 0.9, a.vx * 0.9];
            [a.vy, b.vy] = [b.vy * 0.9, a.vy * 0.9];
          }
        }
      }
    }

    function animate() {
      dots.forEach(d => {
        if (d.mode === "follow") {
          d.x += (mouseX - d.x) * d.speed;
          d.y += (mouseY - d.y) * d.speed;
        } else {
          d.vy += gravity;
          d.x += d.vx;
          d.y += d.vy;

          if (d.y > floor) {
            d.y = floor;
            d.vy *= -0.4;
            d.vx *= 0.97;
          }

          if (d.x < 0 || d.x > innerWidth) {
            d.vx *= -1;
          }
        }
      });

      if (exploded50) handleCollisions();

      dots.forEach(d => {
        d.el.style.left = d.x + "px";
        d.el.style.top = d.y + "px";
      });

      if (exploded100) {
        text.innerText = `ì ì´ ${dots.length}ê°œì…ë‹ˆë‹¤. ì´ì œ ë©ˆì¶œ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.`;
      }

      requestAnimationFrame(animate);
    }

    createDot();
    spawnLoop();
    animate();
  </script>
</body>
</html>
